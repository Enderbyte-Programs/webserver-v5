<!DOCTYPE html>
<html lang="en">
<head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-EB3PKRP4H4"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-EB3PKRP4H4');
        </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The official website of Enderbyte Programs, where you can download software and use some web apps, and other things.">
    <meta name="keywords" content="Software, Computers, Enderbyte Programs, Downloads, Free, Download">
    <link rel="stylesheet" href="/bottles/style.css">
    <title>Enderbyte Programs - Software and Other Things</title>
    <style>
        .tileparent {
            width: 100%;
        }
        .tile {
            width: 200px;
            height: 250px;
            white-space:nowrap;
            overflow: hidden;
            display: inline-block;
            border: 5px solid white;
            border-radius: 5px;
            background-color: white;
            margin: 50px;
            text-wrap: wrap;

        }
        .tile:hover {
            height: auto;
            scale: 105%;
            cursor: pointer;
            
        }
        .tile p {
            color: black;
            text-decoration: none;
        }
        .tile h4 {
            color: black;
            text-align: center;
            text-decoration: none;
        }
        .tile a {
            text-decoration: none;
        }

        #search * {
            color: black;
        }
        fieldset {
            display: inline-block;
        }
        input[type=radio] {
            transform: scale(1.5);
        }

    </style>
</head>
<body style="background-color: darkblue;color: white;">
    <p style="bottom: 0px;position: fixed;color: white;">
        (c) 2021-2024 Enderbyte Programs, all rights reserved. <a href="/privacy.html">Privacy Policy</a> <a href="/sitemap.php">Sitemap</a>
    </p>
    <div class="master">
        <h1 style="text-align: center;">Enderbyte Programs</h1>
        <p id="_h">Welcome to the Enderbyte Programs website! Since 2021. <b>You are person number #PN to visit this website.</b> || This website contains many apps, some web, some desktop. Enjoy!
        <br>
        <b>GUIDE:<br></b>
        White border apps are web apps only<br>
        Green border apps are desktop apps.
        </p>

        <!-- Search Area -->
        <div id="search" style="position: sticky;width: 100%;background-color: paleturquoise;padding: 10px;top: 0;">
            <fieldset style="display: inline-block;">
                <legend>Search</legend>
                <form onsubmit="event.preventDefault()">
                    <img src="bottles/searchicon.png" style="max-width: 24px;max-height: 24px;top: 5px;position: relative;">
                    <input id="ssearch" type="text" style="width: 200px;" onkeyup="onsearch()">
                </form>
            </fieldset>
        </div>

        <div id="tileparent" class="tileparent">
            <div class="tile" id="template" hidden>
                <a href="#LINK">
                    <img src="#IMG" height="200" width="200" style="object-fit: contain;" alt="If you can see this, you need to enable Javascript.">
                    <h4>#TITLE</h4>
                    <p>#DESC</p>
                </a>
            </div>
        </div>
    </div>
    
    <script>

        function onsearch() {
            let query = document.getElementById("ssearch").value.trim().toLowerCase()
            if (query === "") {
                let li = 0
                prs.forEach(element => {
                    document.getElementById("tileparent").children[li].style.display = "inline-block"
                    li += 1
                });
                
            } else {
                let li = 0
                prs.forEach(element => {
                    
                    if (element.title.toLowerCase().includes(query) || element.tags.includes(query)) {
                        document.getElementById("tileparent").children[li].style.display = "inline-block"
                    } else {
                        document.getElementById("tileparent").children[li].style.display = "none"
                    }
                    li += 1
                });
            }
        }

        var apptemplate = document.getElementById("tileparent").innerHTML
        var prs = []
        document.getElementById("tileparent").innerHTML = ""
        if (window.location.search.substr(1).includes("oldr")) {
            alert("The website you tried to visit is old and out of date. This is the new website.")
        }
        let obfs = Math.round(Math.random()*1000)
        fetch("usercount.txt?obfs="+obfs).then(function(r){r.text().then(function(rt) {//OBFS is for preventing browser caching
            document.getElementById("_h").innerHTML = document.getElementById("_h").innerHTML.replace("#PN",rt)
        })})
        fetch("increment_user_count.php");

        fetch("/apps/appindex.json").then(function(r) {
            r.text().then(function(rt) {
                prs = JSON.parse(rt).apps
                prs.forEach(app => {
                    let newapp = structuredClone(apptemplate)
                    newapp = newapp.replace("#LINK",app.dir)
                    newapp = newapp.replace("#IMG",app.img)
                    newapp = newapp.replace("If you can see this, you need to enable Javascript.",app.description)
                    newapp = newapp.replace("#TITLE",app.title)
                    newapp = newapp.replace("#DESC",app.description)

                    
                    document.getElementById("tileparent").innerHTML += newapp
                    if (app.tags.includes("desktop")) {
                        document.getElementById("tileparent").children[document.getElementById("tileparent").children.length - 1].style.border = "5px green solid"
                    }

                });
            })
        })

    </script>
</body>
</html>